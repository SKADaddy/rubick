<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>windows 本地启动项目 | Rubick</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="你的开源桌面插件应用">
    
    <link rel="preload" href="/assets/css/0.styles.8cf89cc7.css" as="style"><link rel="preload" href="/assets/js/app.761cac3b.js" as="script"><link rel="preload" href="/assets/js/2.0ac0bca1.js" as="script"><link rel="preload" href="/assets/js/12.f3f0abef.js" as="script"><link rel="prefetch" href="/assets/js/10.d6270c2c.js"><link rel="prefetch" href="/assets/js/11.05255ac5.js"><link rel="prefetch" href="/assets/js/3.e82eb2f0.js"><link rel="prefetch" href="/assets/js/4.7dd77db5.js"><link rel="prefetch" href="/assets/js/5.77d6f894.js"><link rel="prefetch" href="/assets/js/6.2261379c.js"><link rel="prefetch" href="/assets/js/7.86e20c00.js"><link rel="prefetch" href="/assets/js/8.60f12302.js"><link rel="prefetch" href="/assets/js/9.e3b6b689.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8cf89cc7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo.png" alt="Rubick" class="logo"> <span class="site-name can-hide">Rubick</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  使用文档
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  开发者
</a></div><div class="nav-item"><a href="https://github.com/clouDr-f2e/rubick/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ChangeLog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/clouDr-f2e/rubick" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  使用文档
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  开发者
</a></div><div class="nav-item"><a href="https://github.com/clouDr-f2e/rubick/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ChangeLog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/clouDr-f2e/rubick" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/guide/" class="sidebar-link">使用文档</a></li><li><a href="/dev/" class="sidebar-link">开发者</a></li><li><a href="/qs/" aria-current="page" class="active sidebar-link">常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qs/#windows-本地启动项目" class="sidebar-link">windows 本地启动项目</a></li><li class="sidebar-sub-header"><a href="/qs/#macos" class="sidebar-link">macos</a></li><li class="sidebar-sub-header"><a href="/qs/#最后" class="sidebar-link">最后</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TODO: 原理解析</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="windows-本地启动项目"><a href="#windows-本地启动项目" class="header-anchor">#</a> windows 本地启动项目</h2> <p>如果您是在 <code>windows</code> 系统下使用本项目进行启动的话，如果出现了一些跑不起的情况，下面的一些经验或许可以帮助您。</p> <h3 id="安装依赖"><a href="#安装依赖" class="header-anchor">#</a> 安装依赖</h3> <p>项目是基于 <code>electron-vue</code> 的，所以需要本地已经安装好 <code>nodejs</code>。当 <code>clone</code> 好项目到本地的时候，需要对项目依赖
进行手动安装：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> rubick
$ <span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div><p>由于本项目依赖 <a href="https://wilix-team.github.io/iohook/" target="_blank" rel="noopener noreferrer">iohook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="http://robotjs.io/" target="_blank" rel="noopener noreferrer">robotjs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
而这2个项目在安装时，依赖 node gyp 的编译，所以你可能会遇到一些环境问题或者网络问题。</p> <h3 id="iohook-安装"><a href="#iohook-安装" class="header-anchor">#</a> iohook 安装</h3> <p>首先，我们先来安装 <code>iohook</code>，按照 <code>iohook</code> 的文档所示，安装前需要先确定当前 <code>electron</code> 的版本以及 <code>abi</code> 的版本，
现在我们使用的 <code>electron</code> 版本是 <code>v11.0.2</code> 所以只需要在 <code>package,json</code> 中加上以下配置，指定安装特点的<code>.node</code> 文件</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;iohook&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;node-83&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;electron-85&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;platforms&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;win32&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;arches&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;x64&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;ia32&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来执行安装操作：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> i iohook
</code></pre></div><p>如果此时一直停留在 <code>node install</code> 进度上，说明可能需要翻墙，这里就不介绍如何翻墙了。此时虽然 <code>.node</code> 文件没有下载成功，但是 <code>iohook</code> 源文件
已经安装成功，如果因为翻墙问题导致的安装失败，我们解决好翻墙问题后，可以接着运行一下：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> run rebuild_win
</code></pre></div><p>到这里 <code>iohook</code> 应该就安装好了</p> <h3 id="安装-robotjs"><a href="#安装-robotjs" class="header-anchor">#</a> 安装 robotjs</h3> <p>和 iohook 不同， <code>robotjs</code> 需要 <code>node gyp</code> 重新编译 <code>C++</code>。所以第一步是先安装源文件：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i robotjs@git+https://github.com/Toinane/robotjs.git
</code></pre></div><p>此时如果报错，大多还是因为墙的问题。不管包不报错，我们接下来都需要执行一下下面的编译操作：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> run rebuild_win
</code></pre></div><p>此时，可能会出现下这个错：</p> <div class="language-text extra-class"><pre class="language-text"><code>gyp ERR! find VS msvs_version not set from command line or npm config
// ...
</code></pre></div><p>google 了一圈，大多数是说缺少 <code>visual studio</code>。需要安装，所以可以执行这个命令：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> <span class="token function">install</span> --global --production windows-build-tools 
</code></pre></div><p>到这里会进入正常的安装流程，理论上会一部到底，如果你卡在了 <code>Successfully installed Python 2.7</code> 不动了
可以去一下 <code>C:\Users\you username\.windows-build-tools</code> 找一下看看应该会有一个 <code>vs_BuildTools</code> 文件
双击后，会出现以下弹窗：</p> <p><img src="/rubick/images/6.png" alt=""></p> <p>点击启动，如果一切正常那么可以方向关掉你的命令行了，此时 vs 已经安装成功，接下来要配置一下编译工具：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> config <span class="token builtin class-name">set</span> python python3.9
$ <span class="token function">npm</span> config <span class="token builtin class-name">set</span> msvs_version <span class="token number">2017</span>
</code></pre></div><p>到这里终于完事了，再执行一下 <code>npm run rebuild_win</code> 此时已经安装成功！</p> <h2 id="macos"><a href="#macos" class="header-anchor">#</a> macos</h2> <p>macos 下安装就简单不少了，首先先解决翻墙的问题，然后：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> i
</code></pre></div><p>最后执行</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">$npm</span> run rebuild
</code></pre></div><h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <p>如果您在启动过程中还有其他的问题，欢迎随时给我们反馈，我们会在第一时间回复：<a href="https://github.com/clouDr-f2e/rubick/issues/20" target="_blank" rel="noopener noreferrer">issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/clouDr-f2e/rubick/edit/master/qs/README.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dev/" class="prev">
        开发者
      </a></span> <span class="next"><a href="/blogs/plugin/">
        插件化实现原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.761cac3b.js" defer></script><script src="/assets/js/2.0ac0bca1.js" defer></script><script src="/assets/js/12.f3f0abef.js" defer></script>
  </body>
</html>
